<style type="text/css">
  * {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
  }

  .contenedor {
    height: 87vh;
    max-width: 600px;
    min-width: 340px;
  }

  .container-agencias {
    border-color: #809eff !important;
    height: 90%;
  }

  .icon-circle {
    width: 40px;
    height: 40px;
    cursor: pointer;
  }

    .icon-circle.deshabilitado {
      cursor: default;
    }

  .icon {
    font-size: 30px;
  }

  .card-agencias {
    background-color: #1d5381;
  }

    .card-agencias.aplicado {
      background-color: #bb703c;
    }

    .card-agencias.deshabilitado {
      background-color: #1d538173;
    }

    .card-agencias.aplicadoDeshabilitado {
      background-color: #bb703c73;
    }

  .titleCardAgencia {
    cursor: pointer;
  }

    .titleCardAgencia.deshabilitado {
      cursor: default;
    }

  @media (max-width: 576px) {
    .input-responsivo {
      width: 100%;
    }
  }
</style>

<p></p>
<div class="container-fluid contenedor">
  <h3 >Entrega A UTD</h3>
  <hr class="my-0" />
  <div class="container-agencias border rounded p-3 d-flex flex-column mt-3">
    <div class="mb-3">
      <div class="d-flex justify-content-between">
        <button class="btn"
                style="font-weight: 600"
                type="button"
                ng-click="iniciarTerminarEntrega()"
                ng-class="{'btn-success': !registrando,'btn-danger': registrando}"
                ng-disabled="Agencias.length === 0">
          {{tituloEntrega}}
        </button>
        <button class="btn btn-info"
                style="font-weight: 600"
                type="button"
                ng-click="actualizar()">
          Actualizar
        </button>
      </div>
    </div>
    <div class="form-inline mb-3" for="fechaEntregaUTD">
      <label class="m-0"> Fecha de recojo </label>
      <input type="text"
             class="form-control input-responsivo mt-sm-0 ml-sm-2 mt-2"
             id="fechaEntregaUTD"
             ng-model="modelFecha"
             ng-change="InicializarFlujoAgencias()"
             ng-disabled="registrando"
             readonly />
    </div>
    <div class="mb-3">
      <div class="form-inline">
        <label class="m-0" for="codAgencia">
          C&oacute;digo o Nombre de Agencia:
        </label>
        <input type="text"
               class="input-responsivo form-control form-control-sm mx-sm-0 mt-sm-0 ml-sm-2 mx-auto mt-2"
               id="codAgencia"
               ng-model="filtroAgencia" />
      </div>
    </div>
    <hr class="m-0" style="border-width: 2px" />
    <div class="mt-2">
      <div class="d-flex justify-content-between align-items-center">
        <p class="m-0">
          <b>Agencias seleccionadas: {{idAgenciasSeleccionadas.length}}</b>
        </p>
        <div class="d-flex align-items-center">
          <p class="mb-0 mr-3"><b>Todas</b></p>
          <div class="rounded-circle bg-light icon-circle"
               ng-click="toggleSeleccionarTodasLasAgencias()"
               ng-class="{ 'deshabilitado': !registrando }"
               style="border: 1px solid #1d5381">
            <i ng-if="todasLasAgenciasSeleccionadas"
               class="fa fa-check icon text-success p-1"
               aria-hidden="true"></i>
          </div>
        </div>
      </div>
    </div>
    <div class="mt-3" style="overflow-y: auto">
      <div ng-repeat="agencia in Agencias | filter: filtroAgencia"
           class="card-agencias rounded d-flex justify-content-between px-3 py-2 align-items-center mb-3"
           ng-class="{ 'aplicado': agencia.iIdEstado === 12, 'deshabilitado': !registrando, 'aplicadoDeshabilitado': !registrando && agencia.iIdEstado === 12}">
        <div class="w-75">
          <span class="text-white titleCardAgencia"
                ng-click="verDetallesEntrega(agencia.iId)"
                ng-class="{ 'deshabilitado': !registrando }">
            Agencia: {{ agencia.sIdAgencia }} - {{ agencia.sAgencia }}
          </span>
        </div>
        <div class="rounded-circle bg-light icon-circle"
             ng-click="toggleSeleccionarAgencia(agencia)"
             ng-class="{ 'deshabilitado': !registrando }">
          <i ng-if="agencia.agregado"
             class="fa fa-check icon text-success p-1"
             aria-hidden="true"></i>
        </div>
      </div>
    </div>
  </div>
</div>